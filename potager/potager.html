<!doctype html>
<html lang="fr">
	<head>
		<title>le Potager</title>
		<meta charset="utf-8">
		<script type="text/javascript" src="potager.js"></script>
	</head>






	<body>
		<div class="tour_plateau">
			<canvas id="plateau" width="600" height="600" oncontextmenu="modi(parseInt((event.clientX-12)/(600/ns)),parseInt((event.clientY-12)/(600/ns)),1); affi();" onclick="modi(parseInt((event.clientX-12)/(600/ns)),parseInt((event.clientY-12)/(600/ns)),1); affi();"></canvas>
		</div>
			<span class="info_game" id="current_state_0">Tour:1&nbsp;&nbsp;&nbsp;Jaune:1</span>
			<span class="info_game" id="current_state_1">Jaune:0&nbsp;&nbsp;&nbsp;Graines:0</span>
			<span class="info_game" id="current_state_2">Bleu :0&nbsp;&nbsp;&nbsp;Graine:0</span>

		<div style="position: absolute; top:10px; left:630px;">
			<button class="tablinks" style="background:#d3d3d3;" onclick="openTab(event, 'regles')">Rules</button>
			<button class="tablinks" onclick="openTab(event, 'macros')">Actions</button>
			<button class="tablinks" onclick="openTab(event, 'menu')">Board</button>
		
		
		
		</div>




		<div id="menu" class="tabcontent">
			<p class="choix">Random:<input class="choix_input" id="nnh" type="number" min="0" max="1000" value="0" oninput="n_h=nnh.value"/></p>
			<p class="choix">Colors:<input class="choix_input" id="nnc" type="number" min="2" max="8"    value="2" oninput="n_c=nnc.value"/></p>
			<p class="choix">Length:<input class="choix_input" id="nns" type="number" min="3" max="8"   value="3" oninput="n_s=nns.value"/></p>
			<p class="choix">Bubles:<input class="choix_input" id="nnd" type="number" min="2" max="8" value="4" oninput="n_d=nnd.value"/></p>
			<input type="button" class="main" value="new game" onclick="init(); affi();"/>
			<input type="button" class="main" value="default" onclick="nnc.value=2;nns.value=3;nnd.value=4;nnh.value=0;n_c=2;n_s=3;n_d=4;n_h=0"/>
		</div>

		<div id="macros" class="tabcontent">
			<input type="button" class="ctrlz" value="undo" onclick="l=done.length; if(l!=0){ptf=false; let [da,db,dc]=done[l-1]; modi(da,db,nc-dc); affi(); ptf=true}"/>
			<br/><input type="button" class="ctrlz" value="redo" onclick="l=undone.length; if(l!=0){let [da,db,dc]=undone[l-1]; modi(da,db,dc); affi();}"/>
			<br/><input type="button" class="ctrlz" value="rand" onclick="modi(Math.floor(Math.random()*ns), Math.floor(Math.random()*ns),Math.floor(Math.random()*(nc-1)+1)); affi()"/>
			<br/><input type="button" class="ctrlz" value="diag" onclick="l=done.length; if(l!=0){let [da,db,dc]=done[l-1]; for(let i=1;i<ns;i++){modi((da+i)%ns,(db+i)%ns,dc)}; affi(); ptf=true}"/>
			<br/><input type="button" class="ctrlz" value="restart" onclick="done=[]; undone=[]; rein(); affi();"/>
			<br/><input type="button" class="ctrlz" value="forget" onclick="done=[]; undone=[]; ptf=true;"/>
		</div>

			<div id="regles" class="tabcontent" style="display:block !important;">

				<h3>Le potager</h3>
				<p>
				Ce jeu peut se jouer sur un plateau carr√© de
				<input type="button" value="3" onclick="n_s=3;init();affi()">,
				<input type="button" value="5" onclick="n_s=5;init();affi()">,
				<input type="button" value="8" onclick="n_s=8;init();affi()"> ou
				<input type="button" value="13" onclick="n_s=13;init();affi()">
				cases de c√¥t√©.</p>
				<h3>R√®gles:</h3>
				<h4>üî∂ But du jeu :</h4>
				<p>Deux jardiniers doivent se partager un m√™me potager. L'un plante des
				aubergines (bleu) et l'autre des patates (jaune). Chacun veut occuper
				le maximum de parcelles (cases) √† la fin de la saison.</p>
				<p>Une fin de saison advient lorsqu'on ne peut plus jouer, m√™me s'il
				reste des parcelles disponibles. On fait alors le compte des parcelles
				occup√©es par chacun et en cas d'√©galit√©, c'est le joueur dont c'√©tait
				le tour et qui n'a pas pu jouer qui perd.</p>
				<h4>üî∂ D√©marrage de la saison :</h4>
				<p>Le bac √† compost constitue la pioche. On √©labore ses plantations √†
				partir du compost. Lorsqu'une carte est supprim√©e elle retourne au
				compost.  Le bac √† compost contient : des cartes rectangulaires de 1,
				2, 3, 5, 8 et 13 parcelles de long (elles font toutes une parcelle de
				large).</p>
				<p>Le jardinier qui joue en premier pose obligatoirement une ¬´ graine ¬ª
				(c'est-√†-dire la plus petite carte, avec un seul point). Ensuite le
				deuxi√®me joueur joue deux fois, et √† partir de l√† chaque joueur jouera
				toujours deux fois cons√©cutivement √† son tour (tant que c'est
				possible).</p>
				<h4>üî∂ Pour planter au potager il y a 3 r√®gles √† respecter :</h4>
				<h5>üî∑ [Diversit√©]</h5>
				Deux cartes de m√™me taille ET de m√™me couleur ne doivent jamais se<br/>
				toucher.  Seul les contacts entre cartes verticalaux ou horizontalaux<br/>
				comptent. Les diagonales ne comptent pas. Cette affirmation vaut pour<br/>
				toute les r√®gles.<br/>
				<br/>
				<img src="divers.png" alt="exemples interdictions" style="width:200px; height:100px">
				<h5>üî∑ [Semis]</h5>
				<p>Pour poser une ligne, il faut qu'elle touche suffisemment de graines, de la m√™me couleur.
				Plus une ligne est grande, plus il faudra de graines:</p>
				<table style="border:3px solid white; align:center">
					<tr>
						<th>Ligne<br/>√† poser</th>
						<th>Graines<br/>n√©cessaires</th>
					</tr>
					<tr>
						<td>2 cases</td>
						<td>1 graine</td>
					</tr>
					<tr>
						<td>3 cases</td>
						<td>2 graines</td>
					</tr>
					<tr>
						<td>5 cases</td>
						<td>3 graines</td>
					</tr>
					<tr>
						<td>8 cases</td>
						<td>4 graines</td>
					</tr>
					<tr>
						<td>13 cases</td>
						<td>5 graines</td>
					</tr>
				</table>
				<p>Donc autant de graines qu'il y a de tailles de cartes plus petites.</p>
				<img src="semis_b.png" alt="3 graines" style="width:200px; height:100px">
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="semis_e.png" alt="3 graines, une ligne_5" style="width:200px; height:100px">
				<h5>üî∑ [Remplacement]</h5>
				<p>On peut poser une carte par-dessus les autres, seulement si elle est
				plus grande que chaque carte qu'elle recouvre individuellement. Poser
				par-dessus, supprime ce qui est en dessous. Pas
				besoin de recouvrir la totalit√© de la carte (il suffit d'une case)
				pour l'envoyer au compost.</p>
				<br/>
				<img src="remplace_b.png" alt="3 graines, autres" style="width:200px; height:100px">
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="remplace_e.png" alt="3 graines, une ligne_5" style="width:200px; height:100px">
				<br/>
				<p>Une carte pos√©e ne peut pas d√©passer du plateau. De ce fait une carte
				13 (ou de la taille du plateau s'il est plus petit), une fois pos√©e,
				ne peux pas √™tre renvoy√©e au compost, car elle est la plus grande.</p>
				Bon Jardinage !
				<h4>üî∂ Particularit√© :</h4>
				<p>Il est permis √† tout moment de jouer une carte n'√©tant pas de sa couleur.
				Cette r√®gle est surtout int√©ressante lorsque les possibilit√©s d'actions sont restreintes (milieu ou fin de partie).</p>
				<h4>üî∂ Commandes  :</h4>
				<p>Le plateau est initialement vide. Pour r√©initialiser et choisir la taille du plateau, cliquez sur les boutons 3, 5, 8, 13
				en haut de la notice.</p>
				<p>La couleur du tour du plateau indique qui doit jouer. Si la partie est termin√©e, le quadrillage se met de la couleur du gagnant.</p>
				<p>Pour poser une carte, il faut cliquer sur les deux extr√™mit√©s de celle-ci.
				S'il s'agit d'une graine, il faudra seulement cliquer deux fois sur la m√™me case.
				Apr√®s un premier clic, toutes les cases correspondant √† une action valide sont repr√©sent√©es en rouge.
				Cliquer sur une case noire annule et fait un nouveau choix. Cliquer sur une case rouge valide</p>
				<img src="clic.png" alt="3 graines, autres" style="width:200px; height:100px">
				<p>S'il n'y a qu'une seule case rouge, elle est s√©lectionn√©e automatiquement: pas besoin de cliquer une seconde fois.</p>
				<p>Si jamais vous voulez jouer pour l'adversaire, cliquez une premi√®re fois avec le clic droit / bouton 3.</p>

			</div>


			<style type="text/css">
body {background-color: black; color: white;}
b {color:#ff8888;}
table, th, td {border:1px solid white; border-collapse:collapse; padding:3px; text-align:center;}
<!--.tour_plateau {border: 1px solid white; position:abosulte; top:2px; left:2px; width:605px; height:605px;}-->
.tour_plateau {border: none; position:abosulte; top:2px; left:2px; width:605px; height:605px;}
#plateau {position:relative; top:2px; left:2px;}
#menu   {position:absolute; top:50px; left:630px; width:200px; background-color:#004; font-size:16px;}
#regles {position:absolute; top:50px; left:630px; width:520px; height:520px; overflow-y:auto; background-color:#004; font-size:16px;}
#macros {position:absolute; top:50px; left:630px; width:200px; background-color:#004; font-size:16px;}
.main {height:30px; width:80px;}
.choix {width:200px;}
.choix_input {width:80px;position:absolute;right:10px;}
#glob_menu {position: absolute; top:10px; left:630px; width:300; height:20;background-color:#ffffff}
.tablinks{background-color:#888888; float:left; border:none; outline:none; padding:14px 16px; transition:0.8s;}
.tablinks:hover {background-color: #eeeeee !important;}
.tablinks.active {background-color: #cc0000;}
.tabcontent{display: none; padding: 6px 12px; border:1px solid #ccc; border-top: none;}
.info_game{display:inline-block; color:white; padding:2px 2px; background-color:#333; width:194px; text-align:center;}
ctrlz {height:24px; width:98px;}
/* create a scrollbar for rules*/
.scroller {
	width: 300px;
	height: 100px;
	overflow-y: scroll;
	scrollbar-color: rebeccapurple green;
	scrollbar-width: thin;
}
			</style>

			<script>
				init(); affi();
//<-onclick="modi(parseInt(e.pageX/c_grand), parseInt(e.pageY/c_grand)); affi();"->
			</script>

	</body>
</html>

