<!doctype html>
<html lang="fr">
	<head>
		<title>le Potager</title>
		<meta charset="utf-8">
		<script type="text/javascript" src="potager.js"></script>
		<link rel="stylesheet" type="text/css" href="potager.css" >
	</head>






	<body>
		<div id="tour_plateau">
			<canvas id="plateau" width="600" height="600" oncontextmenu="modi(parseInt((event.clientX-12)/(600/ns)),parseInt((event.clientY-12)/(600/ns)),2); affi(); info();" onclick="modi(parseInt((event.clientX-12)/(600/ns)),parseInt((event.clientY-12)/(600/ns)),1); affi(); info();"></canvas>
<!--contextmenu: right, auxclick: middle-->
		</div>
		<span class="info_game" id="current_state_0">Tour:1&nbsp;&nbsp;&nbsp;Jaune:1</span>
		<span class="info_game" id="current_state_1">Jaune:0&nbsp;&nbsp;&nbsp;Graines:0</span>
		<span class="info_game" id="current_state_2">Bleu :0&nbsp;&nbsp;&nbsp;Graine:0</span>

		<div class="tabmenu">
			<button class="tablinks" id="b_regles" style="background:#d3d3d3;" onclick="openTab(event, 'regles', undefined)">RÃ¨gles</button>
			<button class="tablinks" id="b_sauvegarde" onclick="openTab(event, 'sauvegarde', undefined)">Sauvegarde</button>
			<button class="tablinks" id="b_analyse" onclick="openTab(event, 'analyse', undefined)">Analyse</button>
			<button class="tablinks" id="b_opposant" onclick="openTab(event, 'opposant', undefined)">Opposant</button>
		</div>

		<div id="sauvegarde" class="tabcontent">
				<input type="button" class="b_option" value="Nouveau" title="[Q] Sauvegarde (texte) et rÃ©initialise." onclick="init(); affi()">
				<input type="button" class="b_option" value="PrÃ©cÃ©dant" onclick="">
				<input type="button" class="b_option" value="Suivant" onclick="">
				<input type="button" class="b_option" value="Sauvegarder" title="[S] Affiche ici le compte-rendu de la partie actuelle" onclick="import_game()">
				<input type="button" class="b_option" value="Charger" title="[M] Quitte. Joue avec la partie ci-dessous" onclick="export_game(); affi()"><br/><br/>
				<textarea name="game_summary" id="game_summary" cols="40" rows="5" style="width:560px; height:160px; font-size:70%;"></textarea>
				<p>Copiez les donnÃ©es pour archiver votre partie.</p>
		</div>

		<div id="analyse" class="tabcontent">
				<input type="button" class="b_option" value="DÃ©but"   title="[C] Vide le plateau, mais les actions sont mÃ©morisÃ©es" onclick="card_begin(true);affi()">
				<input type="button" class="b_option" value="Annuler" title="[T] [Ctrl-Z] Remonte le temps d'un tour" onclick="card_undo(true);affi()">
				<input type="button" class="b_option" value="Refaire" title="[N] [Ctrl-Y] Annule l'annulation" onclick="card_redo(true);affi()">
				<input type="button" class="b_option" value="Fin"     title="[L] Va au coup enregistrÃ© le plus rÃ©cent" onclick="card_end(true);affi()">
				<input type="button" class="b_option" value="VidÃ©o"   title="[Espace] Visualise la partie en accÃ©lÃ©rÃ©" onclick="card_video()">
				<!--Attention: la fonction 'undo-tree' n'est pas implÃ©mentÃ©e actuellement:-->
				<!--A[ancien]â†’B[actuel], revenir Ã  A et faire une nouvelle action Aâ†’C dÃ©truit B.-->
				<!--Si vous ne comprenez pas cette phrase c'est probablement que ce problÃ¨me n'est pas-->
				<!--problÃ©matique pour vous.-->
		</div>
		<div id="opposant" class="tabcontent">TODO<br/>Jouez seuls pour l'instantâ€¦</div>

		<div id="regles" class="tabcontent" style="display:block !important;">
			<h3>Le potager</h3>
			<p>
			Ce jeu peut se jouer sur un plateau carrÃ© de
			<input type="button" title="Nouvelle partie, taille 3" value="3" onclick="n_s=3;init();affi()">,
			<input type="button" title="Nouvelle partie, taille 5" value="5" onclick="n_s=5;init();affi()">,
			<input type="button" title="Nouvelle partie, taille 8" value="8" onclick="n_s=8;init();affi()"> ou
			<input type="button" title="Nouvelle partie, taille 13" value="13" onclick="n_s=13;init();affi()">
<!--TODO: nslog-->
			cases de cÃ´tÃ©.</p>
			<h3>RÃ¨gles:</h3>
			<h4>ğŸ”¶ But du jeu :</h4>
			<p>Deux jardiniers doivent se partager un mÃªme potager. L'un plante des
			aubergines (bleu) et l'autre des patates (jaune). Chacun veut occuper
			le maximum de parcelles (cases) Ã  la fin de la saison.</p>
			<p>Une fin de saison advient lorsqu'on ne peut plus jouer, mÃªme s'il
			reste des parcelles disponibles. On fait alors le compte des parcelles
			occupÃ©es par chacun et en cas d'Ã©galitÃ©, c'est le joueur dont c'Ã©tait
			le tour et qui n'a pas pu jouer qui perd.</p>
			<h4>ğŸ”¶ DÃ©marrage de la saison :</h4>
			<p>Le bac Ã  compost constitue la pioche. On Ã©labore ses plantations Ã 
			partir du compost. Lorsqu'une carte est supprimÃ©e elle retourne au
			compost.  Le bac Ã  compost contient : des cartes rectangulaires de 1,
			2, 3, 5, 8 et 13 parcelles de long (elles font toutes une parcelle de
			large).</p>
			<p>Le jardinier qui joue en premier pose obligatoirement une Â« graine Â»
			(c'est-Ã -dire la plus petite carte, avec un seul point). Ensuite le
			deuxiÃ¨me joueur joue deux fois, et Ã  partir de lÃ  chaque joueur jouera
			toujours deux fois consÃ©cutivement Ã  son tour (tant que c'est
			possible).</p>
			<h4>ğŸ”¶ Pour planter au potager il y a 3 rÃ¨gles Ã  respecter :</h4>
			<h5>ğŸ”· [DiversitÃ©]</h5>
			Deux cartes de mÃªme taille ET de mÃªme couleur ne doivent jamais se<br/>
			toucher.  Seul les contacts entre cartes verticalaux ou horizontalaux<br/>
			comptent. Les diagonales ne comptent pas. Cette affirmation vaut pour<br/>
			toute les rÃ¨gles.<br/>
			<br/>
			<img src="divers.png" alt="exemples interdictions" style="width:200px; height:100px">
			<h5>ğŸ”· [Semis]</h5>
			<p>Pour poser une ligne, il faut qu'elle touche suffisemment de graines, de la mÃªme couleur.
			Plus une ligne est grande, plus il faudra de graines:</p>
			<table style="border:3px solid white; align:center">
				<tr>
					<th>Ligne<br/>Ã  poser</th>
					<th>Graines<br/>nÃ©cessaires</th>
				</tr>
				<tr>
					<td>2 cases</td>
					<td>1 graine</td>
				</tr>
				<tr>
					<td>3 cases</td>
					<td>2 graines</td>
				</tr>
				<tr>
					<td>5 cases</td>
					<td>3 graines</td>
				</tr>
				<tr>
					<td>8 cases</td>
					<td>4 graines</td>
				</tr>
				<tr>
					<td>13 cases</td>
					<td>5 graines</td>
				</tr>
			</table>
			<p>Donc autant de graines qu'il y a de tailles de cartes plus petites.</p>
			<img src="semis_b.png" alt="3 graines" style="width:200px; height:100px">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="semis_e.png" alt="3 graines, une ligne_5" style="width:200px; height:100px">
			<h5>ğŸ”· [Remplacement]</h5>
			<p>On peut poser une carte par-dessus les autres, seulement si elle est
			plus grande que chaque carte qu'elle recouvre individuellement. Poser
			par-dessus, supprime ce qui est en dessous. Pas
			besoin de recouvrir la totalitÃ© de la carte (il suffit d'une case)
			pour l'envoyer au compost.</p>
			<br/>
			<img src="remplace_b.png" alt="3 graines, autres" style="width:200px; height:100px">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="remplace_e.png" alt="3 graines, une ligne_5" style="width:200px; height:100px">
			<br/>
			<p>Une carte posÃ©e ne peut pas dÃ©passer du plateau. De ce fait une carte
			13 (ou de la taille du plateau s'il est plus petit), une fois posÃ©e,
			ne peux pas Ãªtre renvoyÃ©e au compost, car elle est la plus grande.</p>
			Bon Jardinage !
			<h4>ğŸ”¶ ParticularitÃ© :</h4>
			<p>Il est permis Ã  tout moment de jouer une carte n'Ã©tant pas de sa couleur.
			Cette rÃ¨gle est surtout intÃ©ressante lorsque les possibilitÃ©s d'actions sont restreintes (milieu ou fin de partie).</p>
			<br/><br/><br/><br/><br/><br/>
			<h4>ğŸ”¶ Commandes  :</h4>
			<p>Le plateau est initialement vide. Pour rÃ©initialiser et choisir la taille du plateau, cliquez sur les boutons 3, 5, 8, 13
			en haut de la notice.</p>
			<p>La couleur du tour du plateau indique qui doit jouer. Si la partie est terminÃ©e, le quadrillage se met de la couleur du gagnant.</p>
			<p>Pour poser une carte, il faut cliquer sur les deux extrÃªmitÃ©s de celle-ci.
			S'il s'agit d'une graine, il faudra seulement cliquer deux fois sur la mÃªme case.
			AprÃ¨s un premier clic, toutes les cases correspondant Ã  une action valide sont reprÃ©sentÃ©es en rouge.
			</p>
			<img src="clic.png" alt="3 graines, autres" style="width:200px; height:100px">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="clic_bis.png" alt="3 graines, autres" style="width:200px; height:100px">
			<p>Clic gauche: joue pour soi. S'il y a des cases rouges: valide.<br/>
			Clic droit: joue pour l'autre. S'il y a des cases rouges: annule.</p>
			<p>Les cases rouges apparaissent uniquement s'il y a plusieurs possibilitÃ©s.<br/>
			Si vous faites une erreur (premier clic qui ne permet pas de poser),
			l'ensemble des cases valides sera temporairement affichÃ© en marron.</p>
		</div>

		<!--<style type="text/css" src="potager.css"></style>-->

		<script>
			init(); affi();
//<-onclick="modi(parseInt(e.pageX/c_grand), parseInt(e.pageY/c_grand)); affi();"->
		</script>

	</body>
</html>

